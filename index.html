<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>CRM LENTINI â€“ Supabase Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<div id="login-screen" class="login-container">
  <h1 class="login-title">CRM LENTINI</h1>
  <p class="login-subtitle">Accedi al tuo account</p>
  <input id="login-email" type="email" placeholder="Email" />
  <input id="login-password" type="password" placeholder="Password" />
  <button id="login-btn">Accedi</button>
  <button id="signup-btn" class="secondary">Registrati</button>
  <p id="login-error" class="error"></p>
</div>

<div id="app-screen" class="hidden">
  <header class="brand-header">
    <div class="logo-area">
      <svg width="48" height="48">
        <circle cx="24" cy="24" r="24" fill="#0d2a4d"/>
      </svg>
      <div class="logo-text">
        <div class="logo-main">LENTINI</div>
        <div class="logo-sub">CRM Cloud Professionale</div>
      </div>
    </div>
    <div class="header-actions">
      <button id="toggle-dark" class="dark-btn">ðŸŒ™</button>
      <button id="logout-btn" class="logout-btn">Logout</button>
    </div>
  </header>

  <main class="main-grid">
    <section class="panel dashboard">
      <h2>Dashboard</h2>
      <div class="dash-grid">
        <div class="dash-box">
          <div class="dash-value" id="dash-clients">0</div>
          <div class="dash-label">Clienti</div>
        </div>
        <div class="dash-box">
          <div class="dash-value" id="dash-prospect">0</div>
          <div class="dash-label">Prospect</div>
        </div>
        <div class="dash-box">
          <div class="dash-value" id="dash-next-appointments">0</div>
          <div class="dash-label">Appuntamenti</div>
        </div>
        <div class="dash-box">
          <div class="dash-value" id="dash-tasks">0</div>
          <div class="dash-label">AttivitÃ </div>
        </div>
      </div>
    </section>

    <section class="panel pipeline">
      <h2>Pipeline Commerciale</h2>
      <div class="kanban">
        <div class="kanban-column" data-stage="nuovo">
          <h3>Nuovo contatto</h3>
          <div class="kanban-list" id="kanban-nuovo"></div>
        </div>
        <div class="kanban-column" data-stage="valutazione">
          <h3>In valutazione</h3>
          <div class="kanban-list" id="kanban-valutazione"></div>
        </div>
        <div class="kanban-column" data-stage="trattativa">
          <h3>In trattativa</h3>
          <div class="kanban-list" id="kanban-trattativa"></div>
        </div>
        <div class="kanban-column" data-stage="chiuso">
          <h3>Chiuso / Convertito</h3>
          <div class="kanban-list" id="kanban-chiuso"></div>
        </div>
      </div>
    </section>

    <section class="panel">
      <h2>Nuovo Cliente / Prospect</h2>
      <form id="client-form">
        <label>Nome <input id="client-name" required></label>
        <label>Email <input id="client-email"></label>
        <label>Telefono <input id="client-phone"></label>
        <label>Tipo
          <select id="client-type">
            <option value="cliente">Cliente</option>
            <option value="prospect">Prospect</option>
          </select>
        </label>
        <label>Note
          <textarea id="client-notes"></textarea>
        </label>
        <button type="submit">Salva</button>
      </form>
    </section>

    <section class="panel">
      <h2>Clienti e Prospect</h2>
      <input type="text" id="search-client" placeholder="Cerca..." />
      <ul id="client-list"></ul>
    </section>

    <section class="panel">
      <h2>Agenda Appuntamenti</h2>
      <form id="appointment-form">
        <label>Cliente
          <select id="appointment-client" required></select>
        </label>
        <label>Data e ora
          <input type="datetime-local" id="appointment-datetime" required />
        </label>
        <label>Oggetto
          <input type="text" id="appointment-subject" required />
        </label>
        <label>Note
          <textarea id="appointment-notes"></textarea>
        </label>
        <button type="submit">Aggiungi</button>
      </form>
      <ul id="appointment-list"></ul>
    </section>

    <section class="panel">
      <h2>AttivitÃ  Settimanali</h2>
      <form id="task-form">
        <label>Descrizione
          <input type="text" id="task-title" required />
        </label>
        <label>Scadenza
          <input type="date" id="task-deadline" required />
        </label>
        <label>Cliente (opzionale)
          <select id="task-client">
            <option value="">Nessuno</option>
          </select>
        </label>
        <button type="submit">Aggiungi</button>
      </form>
      <ul id="task-list"></ul>
    </section>

  </main>
</div>

<div id="client-card-modal" class="modal hidden">
  <div class="modal-content">
    <h2 id="card-name"></h2>

    <div class="card-section">
      <h3>Dati finanziari</h3>
      <label>Patrimonio (â‚¬)
        <input type="number" id="card-wealth" />
      </label>
      <label>Profilo di rischio
        <select id="card-risk">
          <option value="basso">Basso</option>
          <option value="medio">Medio</option>
          <option value="alto">Alto</option>
        </select>
      </label>
      <label>Obiettivi
        <textarea id="card-goals"></textarea>
      </label>
    </div>

    <div class="card-section">
      <h3>Note aggiuntive</h3>
      <textarea id="card-notes" rows="4"></textarea>
    </div>

    <div class="card-section">
      <h3>Documenti cliente</h3>
      <input type="file" id="card-file" />
      <button id="card-upload">Carica documento</button>
      <ul id="card-files-list"></ul>
    </div>

    <div class="modal-actions">
      <button id="card-save">Salva</button>
      <button id="card-close">Chiudi</button>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
